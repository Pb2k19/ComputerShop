@inject ICategoryService CategoryService
@page "/{category}"
@page "/"




@if (currentCategory == null)
{
    <PageTitle>Index</PageTitle>
    <DisplayProducts />
}
else
{
    <PageTitle>@currentCategory.Name</PageTitle>
    <DisplayProducts CategoryID="@currentCategory.Id" />
}


@code
{
    [Parameter] public string? Category { get; set; }
    private Category? currentCategory;

    protected override void OnParametersSet()
    {
        if (Category == null)
        {
            currentCategory = null;
        }
        else
        {
            currentCategory = CategoryService.Categories.FirstOrDefault(x => x.Url.ToLower().Equals(Category.ToLower()));
        }
        base.OnParametersSet();
    }
}